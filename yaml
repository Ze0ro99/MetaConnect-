name: CN Terragrunt GitHub Actions Workflow

on:
  push:
    branches:
      - main

jobs:
  example_job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Run Terraform or Terragrunt actions
        uses: CloudNation-nl/cn-terragrunt-github-actions@v0.0.16
        with:
          tf_actions: "apply"  # الأمر المطلوب لتطبيق التغييرات
          tf_actions_binary: "terragrunt"  # استخدم terragrunt
          tf_actions_version: "1.0.0"  # اختر إصدار Terraform المناسب
          tg_actions_version: "0.0.16"  # إصدار Terragrunt
          tf_actions_cli_credentials_hostname: "app.terraform.io"  # أو تركه فارغًا لاستخدام الافتراضي
          tf_actions_cli_credentials_token: ${{ secrets.TERRAFORM_TOKEN }}  # استخدم سرًا لحماية الرمز
          tf_actions_comment: true  # إضافة تعليق (true أو false)
          tf_actions_working_dir: "."  # الدليل الحالي
          tf_actions_fmt_write: true  # كتابة التنسيق (true أو false)

      - name: Create artifact
        run: |
          echo "Creating artifact..."
          mkdir output
          echo "Hello, World!" > output/hello.txt

      - name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: my-artifact
          path: output/

      - name: Download artifact
        uses: actions/download-artifact@v4.1.7
        with:
          name: my-artifact
